# ES業務フロー システムページ構成

## 1. はじめに

この文書は、ES業務フローシステムの主要なページ構成および画面遷移の概要を示すものです。これまでの要件定義、機能要件定義、詳細機能設計を基に、ユーザーがシステム上でどのような画面を操作するかを定義します。

## 2. 主要ページ一覧

本システムは、以下の主要なページ（画面）で構成されることを想定します。

*   **ログインページ:** システム利用開始時の認証画面。
*   **ダッシュボード/ホーム:** ログイン後、ユーザーの役割に応じた情報（担当案件リスト、今日のスケジュール、要対応の書類など）が表示されるトップページ。

### 顧客/提携関連
*   **オーナー一覧:** 登録されている建物オーナーのリスト表示、検索、絞り込み機能。
*   **オーナー詳細:** 特定のオーナーの詳細情報表示。関連する物件、案件、提携情報へのリンク。
*   **不動産会社/管理会社一覧:** 登録されている会社のリスト表示、検索、絞り込み機能。
*   **不動産会社/管理会社詳細:** 特定の会社の詳細情報表示。関連するオーナー、提携情報へのリンク。
*   **業務提携一覧:** 登録されている業務提携のリスト表示。
*   **業務提携詳細:** 特定の業務提携の詳細情報表示。

### 案件関連
*   **案件一覧:** 登録されている工事案件のリスト表示、検索、絞り込み機能（ステータス、担当者など）。
*   **案件詳細:** 特定の案件の詳細情報表示。案件ステータス変更、調査/点検記録、報告/商談記録の入力・表示、関連する見積書、契約書、スケジュールへのリンク。

### 書類関連
*   **見積書一覧:** 見積書のリスト表示。案件詳細から遷移する場合と、書類管理全体から遷移する場合が考えられる。
*   **見積書作成/編集:** 新規見積書の作成または既存見積書の編集画面。
*   **見積書詳細/承認:** 見積書の内容表示。本部担当者向けの承認機能、承認履歴表示。（案件詳細からも参照）
*   **契約書一覧:** 契約書のリスト表示。案件詳細から遷移する場合と、書類管理全体から遷移する場合が考えられる。
*   **契約書作成/編集:** 新規契約書の作成または既存契約書の編集画面。
*   **契約書詳細/承認:** 契約書の内容表示。本部担当者向けの承認機能、承認履歴表示。（案件詳細からも参照）
*   **石綿調査関連書類一覧:** 石綿調査に関連する書類のリスト表示、管理画面。

### スケジュール関連
*   **スケジュール（カレンダー/リスト）:** 調査アポイントや施工日程をカレンダー形式またはリスト形式で表示・管理。
*   **新規スケジュール登録:** 新しいスケジュール（アポイント/施工）の登録画面。

### 本部確認関連
*   **お客様確認対象案件一覧:** 本部担当者向けの、お客様確認が必要な契約済案件のリスト。
*   **お客様確認詳細/記録:** お客様確認の実施状況確認、結果入力画面。

### 管理機能
*   **ユーザー一覧:** システム利用ユーザーのリスト表示（管理者向け）。
*   **ユーザー詳細/編集:** 特定のユーザー情報（役割、ログインIDなど）の表示・編集（管理者向け）。
*   **工事種別マスタ管理:** 工事種別マスタの登録、編集、削除（管理者向け）。

## 3. 主な画面遷移概要

一般的なユーザーの画面遷移フローの例を示します。

```mermaid
graph TD
    A[ログイン] --> B{認証成功};
    B --> C[ダッシュボード/ホーム];
    C --> D[案件一覧];
    D --> E[案件詳細];
    E --> F[見積書作成/編集];
    E --> G[契約書作成/編集];
    E --> H[調査/点検記録 入力];
    E --> I[報告/商談記録 入力];
    E --> J[スケジュール(カレンダー)];
    J --> K[新規スケジュール登録];
    C --> L[顧客一覧];
    L --> M[オーナー詳細];
    L --> N[不動産会社/管理会社詳細];
    C --> O[スケジュール(カレンダー)];
    C --> P[見積書一覧];
    P --> Q[見積書詳細/承認];
    C --> R[契約書一覧];
    R --> S[契約書詳細/承認];

    %% 本部担当者向けの遷移
    C --> T[本部確認対象案件一覧];
    T --> U[お客様確認詳細/記録];

    %% 管理者向けの遷移
    C --> V[ユーザー一覧];
    V --> W[ユーザー詳細/編集];
    C --> X[工事種別マスタ管理];

    F --> E; %% 見積書作成/編集から案件詳細に戻るなど
    G --> E; %% 契約書作成/編集から案件詳細に戻るなど
    H --> E; %% 調査/点検記録入力から案件詳細に戻る
    I --> E; %% 報告/商談記録入力から案件詳細に戻る
    K --> J; %% 新規スケジュール登録からカレンダーに戻る
    Q --> P; %% 見積書詳細から一覧に戻る
    S --> R; %% 契約書詳細から一覧に戻る
    U --> T; %% お客様確認詳細から一覧に戻る
    W --> V; %% ユーザー詳細から一覧に戻る

    %% 関連情報への遷移（例）
    M --> D; %% オーナー詳細から関連案件一覧へ
    M --> J; %% オーナー詳細から関連スケジュールへ
    E --> Q; %% 案件詳細から関連見積書詳細へ
    E --> S; %% 案件詳細から関連契約書詳細へ

```

## 4. 役割とアクセス制御

前述の定義書に基づき、各ページへのアクセス権限はユーザーの役割（営業担当者、本部担当者、施工担当者、管理者など）によって制御されます。

*   **全役割:** ログイン、ダッシュボード、担当案件・スケジュール関連（閲覧、担当範囲の登録・編集）。
*   **本部担当者:** 書類承認機能、お客様確認関連ページへのアクセス。
*   **管理者:** ユーザー管理、マスタ管理ページへのアクセス。
*   **その他の詳細な権限:** 各機能（登録、編集、削除など）に対するアクセス権限は、詳細機能設計や今後のセキュリティ設計でさらに具体化します。 