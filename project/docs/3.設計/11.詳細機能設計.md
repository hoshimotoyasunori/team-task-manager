# ES業務フロー 詳細機能設計

## 1. 顧客管理機能 詳細

### 1.1. 建物オーナー管理
*   オーナー登録画面: 氏名、連絡先、住所、担当営業などの項目を持つ入力フォーム。必須項目の設定。
*   オーナー一覧画面: 登録済みオーナーのリスト表示。検索・絞り込み機能（氏名、担当営業など）。詳細画面へのリンク。
*   オーナー詳細画面: 選択されたオーナーの登録情報の表示。編集・削除ボタン。
*   建物情報との紐付けインターフェース。

### 1.2. 不動産会社・管理会社管理
*   会社登録画面: 会社名、連絡先、担当者名などの項目を持つ入力フォーム。
*   会社一覧画面: 登録済み会社のリスト表示。検索・絞り込み機能。
*   会社詳細画面: 選択された会社の登録情報の表示。編集・削除ボタン。
*   関連するオーナー一覧の表示。

### 1.3. 業務提携管理
*   業務提携登録画面: 提携先会社、提携開始日、紹介手数料率などの項目を持つ入力フォーム。
*   提携一覧画面: 登録済み提携情報のリスト表示。
*   提携詳細画面: 選択された提携情報の表示。編集・削除ボタン。

## 2. 案件管理機能 詳細

### 2.1. 案件登録
*   新規案件/CS案件選択インターフェース。
*   案件情報登録画面: 案件名、関連オーナー、関連物件、担当営業、想定工事種別、発生日などの入力フォーム。必須項目の設定。

### 2.2. 案件一覧・詳細
*   案件一覧画面: 登録済み案件のリスト表示。検索・絞り込み機能（ステータス、担当営業、オーナー、物件など）。詳細画面へのリンク。
*   案件詳細画面: 案件情報の表示。ステータス変更機能。調査/点検結果、報告/商談内容の入力・表示エリア。関連書類（見積書、契約書など）へのリンク。

### 2.3. 調査・点検記録
*   調査/点検結果入力フォーム: 日付、担当者、結果概要、写真添付機能など。
*   記録された調査/点検結果の表示。

### 2.4. 報告・商談記録
*   報告/商談内容入力フォーム: 日付、担当者、商談内容、結果（受注/失注など）など。
*   記録された報告/商談内容の表示。

## 3. 書類作成・管理機能 詳細

### 3.1. 見積書作成
*   見積書作成画面: 案件情報との連携。工事項目、数量、単価、金額の入力グリッド。合計金額自動計算。消費税計算。備考欄。
*   見積書プレビュー機能。
*   見積書保存、編集機能。
*   見積書承認依頼ボタン。

### 3.2. 契約書作成
*   契約書作成画面: 案件情報、関連見積書との連携。契約書類種別（注文書、契約書、契約兼完了確認書）選択。契約金額（見積金額を引用）、契約日、施工希望日、支払い条件などの入力フォーム。
*   **ビジネスルール適用:** 関連見積書が承認済みでないと契約書を作成できない制御。
*   契約書プレビュー機能。
*   契約書保存、編集機能。
*   契約書承認依頼ボタン。

### 3.3. 書類承認ワークフロー
*   承認待ち書類一覧画面（本部担当者向け）。
*   書類承認画面: 書類内容の表示。承認/却下ボタン。コメント入力欄。
*   承認履歴の記録と表示。
*   承認済み書類の編集ロック。

### 3.4. 石綿調査関連書類
*   石綿調査要件発生時に、必要な書類作成フローへの誘導または作成インターフェースの提供。

## 4. スケジュール管理機能 詳細

### 4.1. アポイントメント・施工日程管理
*   カレンダービュー: 月、週、日単位での表示切替。アポイントメント、施工日程の表示。
*   新規日程登録ダイアログ: 案件、担当者、日時、場所、内容などの入力。
*   日程編集、削除機能。
*   担当者ごとの空き状況確認機能。
*   営業担当者と施工担当者間での日程調整リクエスト・承認機能（簡易版）。

## 5. 本部確認機能 詳細

### 5.1. お客様確認管理
*   お客様確認対象案件一覧画面: 契約済案件のうち、お客様確認が必要なリスト。
*   確認要否フラグの手動設定または自動判定（契約兼完了確認書の場合に不要など）。
*   お客様確認結果入力フォーム: 実施日、担当者、結果（本人確認、契約内容確認など）、特記事項。
*   確認ステータス（未実施、実施済OK、実施済NG）の管理。

## 6. その他機能 詳細

### 6.1. マスタ管理
*   工事種別マスタ: 工事名、説明などの登録、編集、削除。

### 6.2. ユーザー・権限管理
*   ユーザー登録、編集、削除（氏名、ログインID、パスワード、役割など）。
*   役割（営業担当者、本部担当者、施工担当者）に応じた機能へのアクセス権限設定。
*   **ログイン機能:** ログインID（社員番号）とパスワードによる認証。
*   **初期パスワード変更機能:** 初回ログイン時にパスワードの変更を強制する。
*   **アクセス制御設計:** 各画面・機能に対して、アクセスを許可する役割を定義する（例: 見積書承認機能は本部担当者のみアクセス可能）。 