# 運用手順書（Djangoバックエンド）

## 1. セットアップ

1. 仮想環境の作成・有効化
   ```sh
   python3 -m venv .venv
   source .venv/bin/activate
   ```
2. 依存パッケージのインストール
   ```sh
   pip install -r requirements.txt
   ```
3. 環境変数の設定（必要に応じて.env等を利用）
   - DB接続情報
   - SECRET_KEY
   - その他

## 2. マイグレーション

```sh
python manage.py makemigrations
python manage.py migrate
```

## 3. 管理ユーザー作成

```sh
python manage.py createsuperuser
```

## 4. サーバ起動

- 開発用:
  ```sh
  python manage.py runserver
  ```
- 本番用:
  - WSGI/ASGIサーバ（gunicorn, daphne等）を利用
  - サーバ設定例は別途記載

## 5. 静的ファイル収集（本番用）

```sh
python manage.py collectstatic
```

## 6. バックアップ・リストア

- DBバックアップ/リストア手順（例: PostgreSQL, MySQL, SQLite等）
- メディアファイルのバックアップ

## 7. ログ・監査証跡の確認

- 管理画面「監査ログ」から操作履歴を確認
- `/api/audit-logs/` でAPI経由でも参照可能（HQユーザーのみ）

## 8. テスト実行

```sh
python manage.py test
```

## 9. APIドキュメント

- Swagger UI: `/swagger/`
- Redoc: `/redoc/`

---

必要に応じて運用手順を随時更新してください。 